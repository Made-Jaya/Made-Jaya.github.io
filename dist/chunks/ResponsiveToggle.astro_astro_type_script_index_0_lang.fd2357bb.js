let L=await localStorage.getItem("isLoggedIn");L===null&&(window.location.href="/login");const s=document.querySelector("#main-navigation"),a=s.querySelector("ul"),i=document.querySelector(".toggle-expanded-view"),p=[...s.querySelectorAll(".sr-only")],x=window.matchMedia("(min-width: 48em)");let y=localStorage.getItem("isMenuExpanded");const M=()=>{[...a.querySelectorAll('a:not([rel*="external"])')].forEach(t=>{t.pathname===window.location.pathname&&(t.classList.add("is-active"),t.setAttribute("aria-current","page"))})},h=()=>{s.classList.add("is-expanded"),localStorage.setItem("isMenuExpanded","true"),i.setAttribute("aria-expanded","true"),i.querySelector("span").textContent="Collapse menu",p.forEach(e=>{e.classList.remove("sr-only")})},d=()=>{s.classList.remove("is-expanded"),localStorage.setItem("isMenuExpanded",null),i.setAttribute("aria-expanded","false"),i.querySelector("span").textContent="Expand menu",p.forEach(e=>{e.classList.add("sr-only")})},w=()=>{x.matches?(s.classList.add("is-desktop"),s.classList.remove("is-mobile"),d()):(s.classList.remove("is-desktop"),s.classList.add("is-mobile"),d())};a&&a.addEventListener("keydown",e=>{const t=e.target.closest("li"),n=[...a.querySelectorAll(".menu-item")],m=n.findIndex(f=>f===t),c=e.key;let o;c==="ArrowDown"&&(e.preventDefault(),n.indexOf(t)===n.length-1?o=n[0]:o=n[m+1]),c==="ArrowUp"&&(e.preventDefault(),n.indexOf(t)===0?o=n[n.length-1]:o=n[m-1]),c==="Escape"&&(o=n[0]),o&&o.querySelector("a, button, input").focus()});i.addEventListener("click",()=>{s.classList.contains("is-expanded")?d():h()});window.addEventListener("resize",w);M();w();y==="true"&&h();const l=document.querySelector("#main-navigation"),u=l.querySelector(".mobile-menu"),r=l.querySelector(".responsive-toggle"),g=[...l.querySelectorAll(".sr-only")],E=window.matchMedia("(min-width: 48em)"),S=e=>{g.forEach(t=>{t.classList.remove("sr-only")}),e.setAttribute("aria-expanded",!0),e.setAttribute("aria-label","Close menu navigation"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 12 7 7m5 5 5 5m-5-5 5-5m-5 5-5 5"/></svg>'},v=e=>{g.forEach(t=>{t.classList.add("sr-only")}),e.setAttribute("aria-expanded",!1),e.setAttribute("aria-label","Open menu navigation"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 8h12M6 12h12M6 16h12"/></svg>'};r.addEventListener("click",e=>{u.classList.toggle("show"),u.classList.contains("show")?S(r):v(r)});window.addEventListener("resize",()=>{const e=[...l.querySelectorAll("span")];E.matches?(u.classList.remove("show"),v(r)):e.forEach(t=>{t.classList.remove("sr-only")})});
